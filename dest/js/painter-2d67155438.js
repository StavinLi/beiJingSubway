"use strict";$.ajax({url:"/apis/subwaymap/beijing.xml",dataType:"xml",type:"GET",timeout:5e3,success:function(t){for(var a=$(t).find("sw").children(),e=0;e<a.length;e++){for(var r=$(a[e]).children(),n=$(a[e]).attr("lc").replace("0x","#"),s=$(a[e]).attr("loop"),o=$(a[e]).attr("slb"),i=0;i<$(a[e]).attr("lp").split(";").length;i++)if($(a[e]).attr("lp").split(";")[i]){var l=$(a[e]).attr("lp").split(";")[i].split(",");$.svg("rect").appendTo("#g-box").attr({x:l[0],y:l[1],width:l[2],height:l[3],fill:n}),(c=$.svg("text").appendTo("#g-box")).addSvgClass("subway-name").attr({x:1*l[0]+l[2]/2,y:1*l[1]+l[3]/3*2}).html(-1==o.split(",")[i].indexOf("机场")?"地铁"+(isNaN(1*o.split(",")[i])?o.split(",")[i]:o.split(",")[i]+"号")+"线":o.split(",")[i]+"线")}for(var p=0;p<r.length;p++)if(p!=r.length-1||"false"!==s){var m=$(r[p]),d=p==r.length-1?$(r[0]):$(r[p+1]);if(m.attr("arc"))$.svg("path").appendTo("#g-box").attr({d:"M"+m.attr("x")+" "+m.attr("y")+" Q"+m.attr("arc").split(":")[0]+" "+m.attr("arc").split(":")[1]+" "+d.attr("x")+" "+d.attr("y"),stroke:n});else $.svg("line").appendTo("#g-box").attr({x1:m.attr("x"),y1:m.attr("y"),x2:d.attr("x"),y2:d.attr("y"),stroke:n,sdata:m.attr("lb")})}for(p=0;p<r.length;p++){if((m=$(r[p])).attr("lb")){var c;if((c=$.svg("text").appendTo("#g-box")).attr({"font-size":12,x:1*m.attr("x")+1*m.attr("rx"),y:1*m.attr("y")+1*m.attr("ry")+14,size:12}),$.svg("tspan").appendTo(c).html(m.attr("lb")),"false"===m.attr("iu")){c.addSvgClass("disabled");var h=$.svg("text").appendTo("#g-box");h.attr({"font-size":12,x:1*m.attr("x")+1*m.attr("rx"),y:1*m.attr("y")+1*m.attr("ry")+28,size:12}).addSvgClass("disabled"),$.svg("tspan").appendTo(h).html("(暂缓开通)")}if("true"===m.attr("ex")){var x=$.svg("image").appendTo("#g-box");x.attr({width:"14",height:"14",x:m.attr("x")-7,y:m.attr("y")-7}),x[0].href.baseVal="https://map.bjsubway.com/subwaymap/turn.png"}else{$.svg("circle").appendTo("#g-box").attr({r:4,cx:m.attr("x"),cy:m.attr("y"),stroke:n,sdata:m.attr("lb")})}}}}window.panzoom=svgPanZoom("#mobile-svg",{zoomEnabled:!0,panEnabled:!0,controlIconsEnabled:!1,fit:!1,center:!1,contain:!1,minZoom:.3,maxZoom:5,customEventsHandler:eventsHandler}),panzoom.pan({x:window.innerWidth/2-950,y:window.innerHeight/2-700})}});var eventsHandler={haltEventListeners:["touchstart","touchend","touchmove","touchleave","touchcancel"],init:function(t){var a=t.instance,e=1,r=0,n=0;this.hammer=Hammer(t.svgElement,{inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput}),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("doubletap",function(t){a.zoomIn()}),this.hammer.on("panstart panmove",function(t){"panstart"===t.type&&(n=r=0),a.panBy({x:t.deltaX-r,y:t.deltaY-n}),r=t.deltaX,n=t.deltaY}),this.hammer.on("pinchstart pinchmove",function(t){"pinchstart"===t.type&&(e=a.getZoom(),a.zoomAtPoint(e*t.scale,{x:t.center.x,y:t.center.y})),a.zoomAtPoint(e*t.scale,{x:t.center.x,y:t.center.y})}),t.svgElement.addEventListener("touchmove",function(t){t.preventDefault()})},destroy:function(){this.hammer.destroy()}};
//# sourceMappingURL=_srcmap/painter.js.map
